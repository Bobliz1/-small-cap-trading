# 小市值策略分享
 - 大盘：沪深300
1. 盘前集合竞价：9:15-9:25
2. 开盘连续竞价：9:30-11:30
3. 午间休市：11:30-13:00
4. 下午连续竞价：13:00-14:57
5. 收盘集合竞价：14:57-15:00
6. 盘后固定价格交易：15:00-15:30（科创板、创业板）
# 小市值策略内容
策略核心内容如下：
 - 选择小市值一篮子股票，当达到以下条件时清仓，并重新选择新的一篮子小市值股票
 - 条件1：达到最大回撤
 - 条件2：收益率>15%时（布林带收紧或成交量下降）
 - 条件3：收益率<15%时（布林带收紧）
 - remark：小市值从价值选股角度，布林带和成交量从动量角度（信号），最大回撤从风险控制角度
   - 此时布林带收紧有两种，一种是绝对收紧，一种是相对收紧。
   
# 251210更新

原先逻辑：根据调仓日进行调仓，但是由于清仓无法立刻清除完毕，导致调仓会收到影响，进而影响最大回撤信号，进而循环影响下一次清仓。

现有逻辑：由事件驱动，引入全局变量flag，当flag=清仓，则只进行清仓，直到仓位空了为止，并使flag=正常。当flag=正常时，若手里没有投资组合，按策略购入新的组合，并记录新的最大净值。若手里有投资组合，则先持有。当手里的投资组合达到设定的最大回撤时，则使得flag=清仓，并进入清仓模式。
# 251211更新

针对get_current_data()函数用不了的情况，经过翻阅api文档得以解决，成功过滤了停牌以及st股票。

新的问题：1.清仓机制有时候仍然失效（已解决，其实是数学直觉有问题，本身没有触发清仓） 2.当股票的短期动量已利用完，股票会进入小幅波动的状态，此时赖在手里收益几乎为0 3.添加个股的风险控制

新的研究思路：怎么在现有的策略上加花， 分为结果导向(容易过拟合）和添加新的组件
 - 结果导向：注重提升结果。    挑战：容易陷入过拟合风险，需要严格的回测机制。
 - 添加组件：在信号观察，和风控等维度，对策略进行完善，目前小市值只是一种信号，尝试再找到其他有效的信号，并与小市值策略进行融合。    挑战：需要背景知识。或者是当你遇到问题后思考怎么提升。

# 251213更新
1.当股票的短期动量已利用完，股票会进入小幅波动的状态，此时赖在手里收益几乎为0。（用布林带解决）
 - 解决1：用成交量判断第一个高度效果如何

2.其实对于小市值策略来说，增长到第一个较大值平台后就可以换下一手小市值了，其实也没必要看很长的布林带
 - 解决2：其实还是要看，他可能不涨

3.从直观看，不涨不跌且小波动的周期期还是太长了，没有及时换手，或者换手了没效果也没有再换手。

# 251214更新

策略基本上更新完毕，核心内容如下：
 - 选择小市值一篮子股票，当达到以下条件时清仓，并重新选择新的一篮子小市值股票
 - 条件1：达到最大回撤
 - 条件2：收益率>15%时（布林带收紧或成交量下降）
 - 条件3：收益率<15%时（布林带收紧）
 - remark：小市值从价值选股角度，布林带和成交量从动量角度（信号），最大回撤从风险控制角度
   - 此时布林带收紧有两种，一种是绝对收紧，一种是相对收紧。
 - question:布林带的使用貌似有问题，他只能表示波动压缩，不一定是涨还是跌
